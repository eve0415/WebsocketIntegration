plugins {
  id "org.jetbrains.kotlin.jvm"
  id "org.jetbrains.kotlin.kapt"
}

repositories {
  maven {
    name "velocity"
    url "https://nexus.velocitypowered.com/repository/maven-public/"
  }
}

java {
  toolchain {
    languageVersion = JavaLanguageVersion.of(11)
  }
}

tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).configureEach {
  kotlinOptions { jvmTarget = 11 }
}

dependencies {
  implementation project(":common")

  compileOnly "com.velocitypowered:velocity-api:1.1.6-SNAPSHOT"
  kapt "com.velocitypowered:velocity-api:1.1.6-SNAPSHOT"
}

// blossom {
//   replaceTokenIn("src/main/kotlin/net/eve0415/mc/WebsocketIntegration/WIVelocityPlugin.kt")
//   replaceToken "@project.version@", project.version
// }

shadowJar {
  exclude('META-INF/versions/')
  archiveFileName = "WebsocketIntegration-Sponge-${project.version}.jar"
}
